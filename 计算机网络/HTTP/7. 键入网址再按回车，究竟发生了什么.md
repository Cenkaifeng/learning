<!-- TOC -->

- [抓包分析](#抓包分析)
- [使用域名访问 Web 服务器](#使用域名访问-web-服务器)
- [真实的网络世界](#真实的网络世界)
- [小结](#小结)
- [问题](#问题)

<!-- /TOC -->

## 抓包分析

![使用IP地址访问web服务器](http://ww1.sinaimg.cn/large/68307314gy1ges0jbzh5xj22bc3wb7wh.jpg)

简述过程：

1. 浏览器从地址栏的输入中获得服务器的 IP 地址和端口号
2. 浏览器用 TCP 的三刺握手鱼服务器建立连接
3. 浏览器向服务器发送拼好的报文
4. 服务器收到报文后处理请求，同样拼好报文再发给浏览器
5. 浏览器解析报文，渲染输出页面

## 使用域名访问 Web 服务器

![使用域名访问Web服务器](http://ww1.sinaimg.cn/large/68307314gy1ges1nz9iltj22bc1ap462.jpg)

## 真实的网络世界

![真实的网络世界](http://ww1.sinaimg.cn/large/68307314gy1ges1shg4xgj22bc1ap4ce.jpg)

## 小结

1. HTTP 协议基于底层的 TCP/IP 协议，所以必须要用 IP 地址建立连接

2. 如果不知道 IP 地址，就要用 DNS 协议去解析得到 IP 地址，否则就会连接失败

3. 建立 TCP 连接后悔按顺序收发数据，请求方和应答方都必须依据 HTTP 规范构建和解析报文

4. 为了减少响应时间，整个过程中的每一环节都会有缓存，能够实现“短路”操作

5. 虽然现实中的 HTTP 传输过程非常复杂，但理论上仍然可以简化为实验里的“两点”模型

## 问题

1. 试着解释一下在浏览器里点击页面链接后发生了哪些事情吗？  
   浏览器缓存 -> 系统缓存 -> hosts 记录 -> 路由缓存 -> 非权威 DNS 服务器 -> 根 DNS 服务器 -> 顶级 DNS 服务器 -> 权威 DNS 服务器 -> 获取 IP 地址和端口 -> TCP 三次握手建立连接 -> 发送 HTTP 请求报文 -> 服务器返回结果 -> 浏览器解析渲染页面

2. 如果是一个不存在的域名，那么浏览器的工程流程会是怎么样呢？  
   走上面题 1 到“获取 IP 地址和端口”之前都失败了，所以 DNS 解析失败，浏览器显示 DNS 错误的提示

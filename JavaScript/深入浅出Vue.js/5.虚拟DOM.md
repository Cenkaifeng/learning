<!-- TOC -->

- [什么是虚拟 DOM](#什么是虚拟-dom)
- [为什么引入虚拟 DOM](#为什么引入虚拟-dom)
- [Vue.js 中的虚拟 DOM](#vuejs-中的虚拟-dom)

<!-- /TOC -->
---

# 什么是虚拟 DOM
虚拟 DOM 是通过状态生成一个虚拟节点树，然后使用虚拟节点数进行渲染。

在渲染之前，会使用新生成的虚拟节点树和上一次生成的虚拟节点树进行对比，只渲染不同的部分。

虚拟节点树是由组件数建立起来的整个虚拟节点（Virtual Node）。

# 为什么引入虚拟 DOM
Vue.js 1.0 的变化侦测在某称程度上知道具体哪些状态发生了变化，这样可以通过更细粒度的绑定来更新视图。但是粒度太细，导致每个绑定都会又一个对应的`watcher`来观察变化。

Vue.js 2.0 选择一个中粒度的解决方案，就是引入虚拟 DOM。组件级别是一个`watcher`实例，也就是说即便一个组件内有 10 个节点使用了某个状态，但其实只有一个`watcher`在观察这个变化。

# Vue.js 中的虚拟 DOM
虚拟 DOM 的终极目标是将虚拟节点（vnode）渲染到视图上。

为了避免不必要的 DOM 操作，虚拟 DOM 在虚拟节点映射到视图的过程中，将虚拟节点和上一次渲染视图所使用的旧虚拟节点（oldVnode）作对比，找到需要更新的节点进行 DOM 操作。

所以，虚拟 DOM 在 Vue.js 中，主要实现了两件事：
- 提供与真实 DOM 节点所对应的虚拟节点 vnode。
- 将虚拟节点 vnode 和旧虚拟节点 oldVnode 进行对比，然后更新视图。